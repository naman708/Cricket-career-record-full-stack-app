<!-- views/form.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
  <title>Product Form</title>
</head>
<body>
  <div class="container">
    <h1 class="title">Player Information</h1>
    <div class="card">
    <div class="card-body">
      <form   id="form">
      <label for="name" class="form-label">Name :</label>
      <input type="text" id="name" name="name" class="form-control" required ><br>
      <label for="DOB" class="form-label">DOB</label>
      <input type="text" id="DOB" name="DOB" class="form-control" required ><br>
      <label for="imageurl" class="form-label">Image URL:</label>
      <input type="" id="imageurl" name="imageurl" class="form-control" required ><br>
      <label for="birthplace" class="form-label">Birth Place</label>
      <input type="text" id="birthplace" name="name" class="form-control" required ><br>
      <label for="career" class="form-label">career</label>
      <textarea id="career" name="description" rows="4" class="form-control" required></textarea><br>
      <label for="matches" class="form-label">No Of Matches</label>
      <input type="text" id="matches" name="matches" class="form-control" required ><br>
  
      <button type="submit" class="btn btn-dark">Submit</button>
      </form>
    </div>
  </div>
  <nav class="navbar navbar-expand-sm bg-light navbar-dark" id="nav">
    <form  method="POST" id="formsearch" class="input-group">
   <label for="pname" class="form-label">Player Name</label>
   <input type="text" id="pname" name="pname"  required ><br>
   <button type="submit" class="btn btn-dark">Search</button>
   <button type="" class="btn btn-sm float-right ml-5 " id="edit">Edit Info</button>
 </form>
</nav>
<div class="container mt-5"> 
    <div class="row">
      <div class="col-sm-4" id="info">
        <h1>Player Information</h1>
        <img id="userImage" src="" alt="Player Image">
        
          <ul class="list-group-item" id="userlist1"></ul>

        
          


      </div>
      <div class="col-sm-8" id="about">
        <h2 class="mt-5">About Career</h2>
        <ul class="list-group-item" id="userlist2"></ul>


      </div>

    </div>
  </div>
  
</body>
</html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js"></script>
<script >
  const form=document.getElementById('form');
  const userlist=document.getElementById('applist');
  const formSearch=document.getElementById('formsearch');
  formSearch.addEventListener('submit',search)
  function search(e){
    e.preventDefault();
    const pname=document.getElementById('pname').value;
    axios.get(`http://localhost:3000/search-player/${pname}`)
    .then((res)=>{
      showuser(res.data.userdetails);
    })
    .catch((err)=>{
      console.log(err);
    })
    


  };

 

  form.addEventListener('submit',onsubmit)
  function onsubmit(e){
    e.preventDefault();
    
     const Name=document.getElementById('name').value;
     const DOB=document.getElementById('DOB').value;
     const PhotoUrl=document.getElementById('imageurl').value;
     const BirthPlace=document.getElementById('birthplace').value;
     const Career=document.getElementById('career').value;
     const NoOfMatches=document.getElementById('matches').value
    const obj={
      Name,
      DOB,
      PhotoUrl,
      BirthPlace,
      Career,
      NoOfMatches
      
    };
    axios.post("http://localhost:3000/add-info",obj)
    .then((response)=>{
     // console.log(response.data);
     // window.location.href = "display.html";
     //showuser(response.data.newuserdetails)
    })
    .catch((err)=>{
      console.log(err);
    })
  
  };
function showuser(user){

  const userlist1=document.getElementById('userlist1');
  const userlist2=document.getElementById('userlist2');
  const userImage = document.getElementById('userImage');
    userImage.src = user ? user.PhotoUrl : '';
  const li=document.createElement('li');
  const div = document.createElement('div');

  div.innerHTML = `Name: ${user.Name}<br> DOB: ${user.DOB} <br> Birth Place:${user.BirthPlace}<br>No Of Matches:${user.NoOfMatches}<br>`;
  
  li.appendChild(div);
  userlist1.appendChild(li);
const li1=document.createElement('li');
li1.appendChild(document.createTextNode(`${user.Career}`));
userlist2.appendChild(li1);

}
</script>
